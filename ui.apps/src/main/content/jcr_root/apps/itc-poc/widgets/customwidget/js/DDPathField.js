CQ.Ext.ns("ACS.CQ.form");ACS.CQ.form.DDPathField=CQ.Ext.extend(CQ.form.PathField,{constructor:function(a){a=CQ.Util.applyDefaults(a,{ddGroups:[CQ.wcm.EditBase.DD_GROUP_ASSET,CQ.wcm.EditBase.DD_GROUP_PAGE],listeners:{render:this.initHrefDragAndDrop}});ACS.CQ.form.DDPathField.superclass.constructor.call(this,a)},initHrefDragAndDrop:function(){var e=this,c=this.findParentByType("dialog"),a=CQ.Ext.isDefined(this.findParentByType("multifield")),d,b;if(this.ddGroups){if(typeof(this.ddGroups)==="string"){this.ddGroups=[this.ddGroups]}d=new CQ.wcm.EditBase.DropTarget(this.el,{notifyDrop:function(i,g,h){var f,j;if(i&&i.clearAnimations){i.clearAnimations(this)}if(i.isDropAllowed(this)){if(h.records&&h.single){f=h.records[0];j=f.get("path");e.setValue(j);g.stopEvent();return true}return false}}});if(a){CQ.WCM.registerDropTargetComponent(e)}c.on("activate",function(g){var f;if(g&&g.el&&this.highlight){f=parseInt(g.el.getStyle("z-index"),10);if(!isNaN(f)){this.highlight.zIndex=f+1}}},d);c.on("deactivate",function(g){var f;if(g&&g.el&&this.highlight){f=parseInt(g.el.getStyle("z-index"),10);if(!isNaN(f)){this.highlight.zIndex=f+1}}},d);c.on("show",function(){if(!a){CQ.WCM.registerDropTargetComponent(e)}},d);c.on("hide",function(){CQ.WCM.unregisterDropTargetComponent(e)},d);for(b=0;b<this.ddGroups.length;b++){d.addToGroup(this.ddGroups[b])}d.removeFromGroup(CQ.wcm.EditBase.DD_GROUP_DEFAULT);this.dropTargets=[d]}}});CQ.Ext.reg("ddpathfield",ACS.CQ.form.DDPathField);